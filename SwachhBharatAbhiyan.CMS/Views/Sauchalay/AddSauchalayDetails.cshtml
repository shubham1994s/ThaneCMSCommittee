@model SwachBharat.CMS.Bll.ViewModels.ChildModel.Model.SauchalayDetailsVM
@{
    Layout = "";
}
<link rel="shortcut icon" href="~/Content/images/img/sba.png" />
@Styles.Render("~/Content/AddEditCSS")
@Scripts.Render("~/Scripts/AddEditScript")
@Scripts.Render("~/bundles/modernizr")

@using (Html.BeginForm("AddSauchalayDetails", "Sauchalay", FormMethod.Post, new { enctype = "multipart/form-data", data_toggle = "validator", role = "form" }))
{
@Html.AntiForgeryToken()
@Html.HiddenFor(model => model.Id);

<div class="container">

    <div class="row">

        <div class="col-sm-1">
            <span class="backk">
                <a href="@Url.Action("SauchalayRegistrationIndex", "Sauchalay")" id="btnBack" class="btn"><span class="glyphicon glyphicon-circle-arrow-left"></span>  Back</a>
            </span>
        </div>

        <div class="col-sm-10">
            <h1 class="add-edit-h1 title_change"></h1>
        </div>
        <div class="panel panel-warning col-sm-12 ">
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        </div>

    </div>

    <div class="row">
        @*<div class="col-md-6">
                <div class="form-groups">
                    <div style="width: auto;padding:0px;text-align: center;height:auto;margin-top:25px">
                        @Html.Label("CTPT Image")
                        <div id="FileUpload_Preview">
                            <a><img src="@Model.Image" class="add-image" style="width:150px;height:130px;padding:2px;overflow:hidden" /></a>
                        </div>
                    </div>
                </div>
                <div class="" style="">
                    <div class="input-group1">
                        <span class="btn btn-file">
                            <span class="glyphicon glyphicon-picture"></span>
                            Browse &hellip;    <input type="file" accept="image/*" name="filesUpload" class="fileUplode" id="filesUpload" onchange="ValidateSize(this)">
                        </span>
                    </div>
                </div>

            </div>
            <div class="col-md-6">
                <div class="form-groups">
                    <div style="width: auto;padding:0px;text-align: center;height:auto;margin-top:25px">
                        @Html.Label("CTPT QR Image")
                        <div id="FileUpload_Preview1">
                            <a><img src="@Model.QrImage" class="add-image" style="width:150px;height:130px;padding:2px;overflow:hidden" /></a>
                        </div>
                    </div>
                </div>
                <div class="" style="">
                    <div class="input-group1">
                        <span class="btn btn-file">
                            <span class="glyphicon glyphicon-picture"></span>
                            Browse &hellip;    <input type="file" accept="image/*" name="filesUpload1" class="fileUplode" id="filesUpload1" onchange="ValidateSize(this)">
                        </span>
                    </div>
                </div>

            </div>*@

        <div class="col-md-4">
            <div class="form-group">
                @*@Html.Label("रेफरेन्स आई डी / Reference Id")*@
                @Html.Label("CT/PT/U ID")
                <input type="text" value="@Model.ReferanceId" id="refId" readonly="readonly" />
            </div>


        </div>

        <div class="col-md-4">
            <div class="form-group">
                @*@Html.Label("नाव / Name")*@
                @Html.Label("Name")
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                @Html.TextBoxFor(model => model.Name, new { @class = "form-control", style = "font-family:Arial, FontAwesome" })
                @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })
                <span class="text-danger" id="err_name"></span>
                <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                <span class="help-block with-errors"></span>
            </div>
        </div>

        <div class="col-md-4">
            <div class="form-group">
                @*@Html.Label("नाव / Name")*@
                @Html.Label("Type Of Toilet")
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                @{ var TlistItems = new List<SelectListItem>();

                    TlistItems.Add(new SelectListItem { Text = "Select Type Of Toilet", Value = "0" });
                    TlistItems.Add(new SelectListItem { Text = "Community Toilet", Value = "CT" });
                    TlistItems.Add(new SelectListItem { Text = "Public Toilet", Value = "PT" });
                    TlistItems.Add(new SelectListItem { Text = "Urinal", Value = "U" });

                }
                @Html.DropDownListFor(model => model.Tot, TlistItems, new {style = "font-family:Arial, FontAwesome", required = "required", @class = "form-control RequiredInput validate[required] RequiredInput" })

                <span class="text-danger" id="err_tot"></span>
                <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                <span class="help-block with-errors"></span>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-4">
            <div class="form-group">
                @*@Html.Label("नाव / Name")*@
                @Html.Label("Number Of Seats")
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                @Html.TextBoxFor(model => model.Tns, new { @class = "form-control", style = "font-family:Arial, FontAwesome" })
                @Html.ValidationMessageFor(model => model.Tns, "", new { @class = "text-danger" })
                <span class="text-danger" id="err_tns"></span>
                <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                <span class="help-block with-errors"></span>
            </div>
        </div>

        <div class="col-md-4">
            <div class="form-group">
                @*@Html.Label("नाव / Name")*@
                @Html.Label("Lattitude")
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                @Html.TextBoxFor(model => model.Lat, new { @class = "form-control", @readonly = "readonly", style = "font-family:Arial, FontAwesome" })
                @Html.ValidationMessageFor(model => model.Lat, "", new { @class = "text-danger" })
                <span class="text-danger" id="err_lat"></span>
                <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                <span class="help-block with-errors"></span>
            </div>
        </div>

        <div class="col-md-4">
            <div class="form-group">
                @*@Html.Label("नाव / Name")*@
                @Html.Label("Longitude")
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                @Html.TextBoxFor(model => model.Long, new { @class = "form-control", @readonly = "readonly", style = "font-family:Arial, FontAwesome" })
                @Html.ValidationMessageFor(model => model.Long, "", new { @class = "text-danger" })
                <span class="text-danger" id="err_log"></span>
                <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                <span class="help-block with-errors"></span>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3">
            <div class="form-group">
                @*@Html.Label("झोन / Zone")*@
                @Html.Label("Zone")
                @*<a class="pull-right add_popup_clear" style="color:#3ab59e;text-decoration:underline!important;cursor:pointer" onclick="PopZone()"> + Add Zone </a>*@
                @Html.DropDownListFor(model => model.ZoneId, Model.ZoneList, new { style = "font-family:Arial, FontAwesome", required = "required", @class = "form-control RequiredInput validate[required] RequiredInput" })
                <span class="text-danger" id="err_zone"></span>
                <span class="help-block with-errors"></span>
            </div>
        </div>
        <div class="col-md-3">

            <div class="form-group">
                @*@Html.Label("वार्ड क्रमांक / Ward No")*@
                @Html.Label("Prabhag")
                @*<a class="pull-right add_popup_clear" style="color:#3ab59e;text-decoration:underline!important;cursor:pointer" onclick="PopWard()"> + Add Ward </a>*@

                @Html.DropDownListFor(model => model.PrabhagId, Model.PrabhagList, new { style = "font-family:Arial, FontAwesome", @class = "form-control RequiredInput validate[required] RequiredInput" })
                @Html.ValidationMessageFor(model => model.PrabhagId, "", new { @class = "text-danger" })
                <span class="text-danger" id="err_ward"></span>
                <span class="help-block with-errors"></span>
            </div>
        </div>
        <div class="col-md-3">

            <div class="form-group">
                @*@Html.Label("वार्ड क्रमांक / Ward No")*@
                @Html.Label("Ward ")
                @*<a class="pull-right add_popup_clear" style="color:#3ab59e;text-decoration:underline!important;cursor:pointer" onclick="PopWard()"> + Add Ward </a>*@

                @Html.DropDownListFor(model => model.WardNo, Model.WardList, new { style = "font-family:Arial, FontAwesome", @class = "form-control RequiredInput validate[required] RequiredInput" })
                @Html.ValidationMessageFor(model => model.WardNo, "", new { @class = "text-danger" })
                <span class="text-danger" id="err_ward"></span>
                <span class="help-block with-errors"></span>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                @*@Html.Label("क्षेत्र / Area")*@
                @Html.Label("Area")
                @*<a class="pull-right add_popup_clear" style="color:#3ab59e;text-decoration:underline!important;cursor:pointer" onclick="PopArea()"> + Add Area </a>*@

                @Html.DropDownListFor(model => model.AreaId, Model.AreaList, new { style = "font-family:Arial, FontAwesome", @class = "form-control RequiredInput validate[required] RequiredInput" })
                @Html.ValidationMessageFor(model => model.AreaId, "", new { @class = "text-danger" })
                <span class="text-danger" id="err_area"></span>
                <span class="help-block with-errors"></span>
            </div>
        </div>

    </div>
    <div class="row">
        <!--<div class="col-md-4">
        <div class="form-group">-->
        @*@Html.Label("मोबाइल नंबर / Mobile Number")*@
        <!--@Html.Label("Mobile Number")
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            @Html.TextBoxFor(model => model.Mobile, new { @class = "form-control", style = "font-family:Arial, FontAwesome", minlength = "10", maxlength = "10" })
            <span class="text-danger" id="err_phone"></span>
        </div>

    </div>-->
        <div class="col-md-4">
            <div class="form-group extra-height-for-textarea">
                @Html.Label("Address")
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                @Html.TextAreaFor(model => model.Address, new { @class = "form-control", style = "font-family:Arial, FontAwesome" })
                @Html.ValidationMessageFor(model => model.Address, "", new { @class = "text-danger" })
                <span class="text-danger" id="err_address"></span>
            </div><br />
        </div>
        <!--<div class="col-md-4">
        <div class="form-group">-->
        @*@Html.Label("रेफरेन्स आई डी / Reference Id")*@
        <!--@Html.Label("Reference Id")
            <input type="text" value="@Model.ReferanceId" id="refId" readonly="readonly" />
        </div>
    </div>-->
        <div class="col-md-4">
            <div class="form-group">
                @Html.Label("Type Of Electricity Meter Connection")

                @*<select value="@Model.TOEMC" id="toemc" class="form-control" style="font-family:Arial, FontAwesome">
                    <option value="">Select Meter Connection</option>
                    <option value="Installed meter">Installed meter</option>
                    <option value="Shared meter">Shared meter</option>
                </select>

                @Html.Label("Type Of Toilet")*@
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                @{ var ElistItems = new List<SelectListItem>();

                    ElistItems.Add(new SelectListItem { Text = "Select Meter Connection", Value = "0" });
                    ElistItems.Add(new SelectListItem { Text = "Installed Meter", Value = "IM" });
                    ElistItems.Add(new SelectListItem { Text = "Shared Meter", Value = "SM" });
                }
                @Html.DropDownListFor(model => model.TOEMC, ElistItems, new {style = "font-family:Arial, FontAwesome", required = "required", @class = "form-control RequiredInput validate[required] RequiredInput" })



            </div>
        </div>

        <div class="col-md-4">
            <div class="form-group">
                @Html.Label("Toilet Categary")
                @*<select value="@Model.TOC" id="toc" class="form-control" style = "font-family:Arial, FontAwesome">
            <option value="">Select Toilet Categary</option>
            <option value="Best Toilet">Best Toilet</option>
            <option value="Normal Toilet">Normal Toilet</option>
        </select>*@
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                @{ var ClistItems = new List<SelectListItem>();

                    ClistItems.Add(new SelectListItem { Text = "Select Toilet Categary", Value = "0" });
                    ClistItems.Add(new SelectListItem { Text = "Best Toilet", Value = "BT" });
                    ClistItems.Add(new SelectListItem { Text = "Normal Toilet", Value = "NT" });
                }
                @Html.DropDownListFor(model => model.TOC, ClistItems, new { style = "font-family:Arial, FontAwesome", required = "required", @class = "form-control RequiredInput validate[required] RequiredInput" })



            </div>
        </div>
    </div>
    <!--<div class="row">
        <div class="col-md-4">
            <div class="form-group">-->
                @*<label for="Select_Image">क्यु आर  कोड  / QR-Code Image</label>*@
                @*@Html.Label("स्कॅनिफाय कोड  / Scaniffy Code")*@
                <!--@Html.Label("Scaniffy Code")
                <div class="form-group textarea">
                    <div style="width: auto;padding: 6px;margin: 0px 10px;height: auto;">
                        <div id="FileUpload_Preview" style="display:inline-flex">
                            <a href="JavaScript:Void(0);" data-lightbox="example-1"><img src="@Model.SauchalayQRCode" class="add-image" style="width:120px;height:auto;padding:2px;overflow:hidden" /></a>
                            <span>
                                <input class="btn-link" type="button" id="Download1" value="Download" style="display:none;margin:20px 0px 0px 20px;text-decoration:underline;" /><br />
                                <input class="btn-link" type="button" id="send_link" value="Send link" style="display:none;margin:7px 0px 0px 20px;text-decoration:underline;" />

                            </span>-->
                            @*<a href="~/Images/add_image_square.png" data-lightbox="example-1"><img src="~/Images/add_image_square.png" class="add-image" style="width:auto;height:100%;padding:2px;overflow:hidden"></a>*@
                        <!--</div>
                    </div>
                </div>
                <div class="">
                    <div class="form-group" style="margin-top:-25px;">

                        <input class="btn" type="button" id="QRCOdeGenrate" value="Generate Scaniffy Code" />

                        <div class="progress" id="prog_bar" style="margin-top:10px;width: 57%;background-color:#dd8680; display:none;">
                            <div id="myBar" class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="background-color:#349B98;width:50%">
                                50%
                            </div>
                        </div>


                        <span class="text-danger" id="err_img"></span>
                    </div>
                </div>
            </div>



        </div>

    </div>-->
</div>


@Html.HiddenFor(c => c.SauchalayID)
@Html.HiddenFor(c => c.ReferanceId)


<div class="row">
    <center><span class="text-danger" id="err_generate"></span></center>
    <div class="form-group1" >
        <button type="submit" name="submit" class="btn" id="btnSubmit" onclick="return Validate()">
            <span class="glyphicon glyphicon-saved"></span>
            <span id="buttonName">Save Changes</span>
        </button>
    </div>
</div>

}
<script type="text/javascript">
    function validation() {

        return true;
    }
    $("#QRCOdeGenrate").click(function () {
        debugger;
        var bool = validation();

        if (bool == true) {
            //$("#err_generate").html("स्कॅनिफाय कोड व्युत्पन्न करा नंतर सेव करा / Generate Scaniffy code then save").delay(1).show().fadeOut('slow');
            $("#err_generate").html("Generate Scaniffy code then save").delay(1).show().fadeOut('slow');
            $('#prog_bar').css("display", "block");
            $("#prog_bar").delay(3000).show().fadeOut('slow');

            //genrate QRCode image
            var a = $('#refId').val();
            if (a != null && a != "") {
                /* var src_qr = 'https://api.qrserver.com/v1/create-qr-code/?data=' + a*/
                var src_qr = 'https://chart.googleapis.com/chart?cht=qr&chl=' + a + "&chs=160x160&chld=L|0"


                $("#FileUpload_Preview img").attr("src", src_qr);
                //$("input #filesUpload").attr("src", src_qr);
                // alert($("#FileUpload_Preview img").attr('src'));


                // cpde end
                $('#btnSubmit').prop('disabled', false);
                //   $('#QRCOdeGenrate').css('display', 'none');
                $('#Download1').show();
                //$('#send_link').show();
                move();
            }
        }


    });

    function move() {
        var elem = document.getElementById("myBar");
        var width = 40;
        var id = setInterval(frame, 10);
        function frame() {
            if (width >= 100) {
                clearInterval(id);
            } else {
                width++;
                elem.style.width = width + '%';
                elem.innerHTML = width * 1 + '%';
            }
        }
    }
</script>
<script type="text/javascript">

    $(document).ready(function () {

        $('#Download1').click(function () {
            var name = $("#Name").val();
            var SauchalayID = $("#n").val();
            var Refid = $("#refId").val();
            var Id = $("#Id").val();
            window.location.href = "/Sauchalay/GenratePDF?name=" + name + "&SauchalayID=" + SauchalayID + "&ReferanceId=" + Refid + "&Id=" + Id;

        })

    });
</script>
@*<script type="text/javascript">
        $(document).ready(function () {

            $('#trash_badge').click(function () {
                $("#FileUpload_Preview").html("");
            });
            $('#filesUpload').change(function () {
                $("#FileUpload_Preview").html("");
                $("#FileUpload_Preview").show();
                $("#FileUpload_Preview").append("<img />");

                if (typeof (FileReader) != "undefined") {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        //-----------------------------------
                        // Preview image
                        //-----------------------------------
                        $("#FileUpload_Preview img").attr("src", e.target.result);
                        $("#FileUpload_Preview img").attr("width", "200px");
                        $("#FileUpload_Preview img").attr("height", "150px");
                    }
                    reader.readAsDataURL($(this)[0].files[0]);
                }
            });




            $('#trash_badge').click(function () {
                $("#FileUpload_Preview1").html("");
            });
            $('#filesUpload1').change(function () {
                $("#FileUpload_Preview1").html("");
                $("#FileUpload_Preview1").show();
                $("#FileUpload_Preview1").append("<img />");

                if (typeof (FileReader) != "undefined") {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        //-----------------------------------
                        // Preview image
                        //-----------------------------------
                        $("#FileUpload_Preview1 img").attr("src", e.target.result);
                        $("#FileUpload_Preview1 img").attr("width", "200px");
                        $("#FileUpload_Preview1 img").attr("height", "150px");
                    }
                    reader.readAsDataURL($(this)[0].files[0]);
                }
            });
        });
    </script>*@
<script type="text/javascript">
    $(document).ready(function () {
        $('#ZoneId').change(function () {
            debugger;
            var selectedText = $(this).find("option:selected").text();
            var selectedValue = $(this).val();

            $.ajax({
                type: "post",
                url: "/HouseMaster/LoadPrabhagNoList?",
                data: { ZoneId: $('#ZoneId').val() },
                datatype: "json",
                traditional: true,
                success: function (data) {
                    var prabhag;
                    for (var i = 0; i < data.length; i++) {
                        prabhag = prabhag + '<option value=' + data[i].Value + '>' + data[i].Text + '</option>';
                    }

                    $('#PrabhagId').html(prabhag);


                }
            });

        });

        $('#PrabhagId').change(function () {
            var selectedText = $(this).find("option:selected").text();
            var selectedValue = $(this).val();

            $.ajax({
                type: "post",
                url: "/HouseMaster/LoadWardNoList?",
                data: { PrabhagId: $('#PrabhagId').val() },
                datatype: "json",
                traditional: true,
                success: function (data) {
                    var ward;
                    for (var i = 0; i < data.length; i++) {
                        ward = ward + '<option value=' + data[i].Value + '>' + data[i].Text + '</option>';
                    }

                    $('#WardNo').html(ward);

                    $('#AreaId').find('option').remove().end().append('<option value="0">--Select Area--</option>');
                }
            });

        });

        $('#SauchalayID').val($('#n').val());
        // alert($('#SauchalayID').val());
        var id = $('#Id').val();
        if (id > 0) {
            $('#Download1').show();
            //$('#send_link').show();
            $('#buttonName').text("Save Changes");
            $('.title_change').text("Edit CT / PT Details");
        } else {
            $('#buttonName').text("Save");
            $('.title_change').text("Add CT / PT Details");
        }


        $("#Name").keypress(function (e) {
            //if the letter is not digit then display error and don't type anything
            if (!(e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57) && e.which != 44)) {
                //display error message
                //$("#err_phone").html("केवल अंक | Digits Only").show().delay(1500).show().fadeOut('slow');
                $("#err_name").html("Alphabates only").show().delay(1500).show().fadeOut('slow');
                return false;
            }
        });

        $("#Mobile").keypress(function (e) {
            //if the letter is not digit then display error and don't type anything
            if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57) && e.which != 44) {
                //display error message
                //$("#err_phone").html("केवल अंक | Digits Only").show().delay(1500).show().fadeOut('slow');
                $("#err_phone").html("केवल अंक | Digits Only").show().delay(1500).show().fadeOut('slow');
                return false;
            }
        });
        $("#Tns").keypress(function (e) {
            //if the letter is not digit then display error and don't type anything
            if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57) && e.which != 44) {
                //display error message
                //$("#err_phone").html("केवल अंक | Digits Only").show().delay(1500).show().fadeOut('slow');
                $("#err_tns").html("केवल अंक | Digits Only").show().delay(1500).show().fadeOut('slow');
                return false;
            }
        });
        //$("#Lat").keyup(function (e) {
        //    var pattern = new RegExp('^-?([1-8]?[1-9]|[1-9]0)\\.{1}\\d{1,6}');
        //    //if the letter is not digit then display error and don't type anything
        //
        //    if (!(pattern.test($("#Lat").val()))) {
        //        //display error message
        //        //$("#err_phone").html("केवल अंक | Digits Only").show().delay(1500).show().fadeOut('slow');
        //        $("#err_lat").html("केवल अंक | Digits Only").show().delay(1500).show().fadeOut('slow');
        //        return false;
        //    }
        //}); $("#Long").keypress(function (e) {
        //    //if the letter is not digit then display error and don't type anything
        //    if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57) && e.which != 44 && e.which != 189 && e.which != 171) {
        //        //display error message
        //        //$("#err_phone").html("केवल अंक | Digits Only").show().delay(1500).show().fadeOut('slow');
        //        $("#err_log").html("केवल अंक | Digits Only").show().delay(1500).show().fadeOut('slow');
        //        return false;
        //    }
        //});
    });



</script>
@*<script type="text/javascript">

            $("#btnSubmit").click(function () {
                if ($('#GameMasterId').val() == 0) {
                    $("#err_name").html("Game Name is Required").delay(1500).show().fadeOut('slow');
                    $('#GameMasterId').focus();
                    return false;
                }
                if ($('#SloganId').val() == 0) {
                    $("#err_slogan").html("Slogan is Required").delay(1500).show().fadeOut('slow');
                    $('#SloganId').focus();
                    return false;
                }

                if ($('#AnswerTypeId').val() == 0) {
                    $("#err_answertype").html("Correct Answer is Required").delay(1500).show().fadeOut('slow');
                    $('#AnswerTypeId').focus();
                    return false;
                }

                if ($.trim($("#Points").val()) == '0') {
                    $("#err_point").html("Point is Required").delay(1500).show().fadeOut('slow');
                    $('#Points').focus();
                    return false;
                }

                return true;
            });

    </script>*@